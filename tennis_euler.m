l=3;
m1=8;
m2=0.75;
k=[3.241,3.241,4.723,4.703,4.684,4.703,4.723,500];
tspan=[0:0.001:5];
x=zeros(7,6,5000);
u=zeros(7,6,5000);
plotx = zeros(5000,1);

x(4,3,1)=1;
x(4,4,1)=1;
x(3,3,1)=1;
x(3,4,1)=1;

for m=2:1:5000
            x(1,2,m) =x(1,2,m-1) + u(1,2,m-1) * 0.01;        
            u(1,2,m) =u(1,2,m-1) + (((-1*k(8)*(x(1,2,m-1)-x(1,3,m-1))^3)/(2*(l^2))-k(8)*((x(1,2,m-1)-x(2,1,m-1))^3)/(2*2*(l^2))-k(2)*((x(1,2,m-1)-x(2,2,m-1))^3)/(2*(l^2)))/m1)*0.01;
            
            x(1,3,m) =x(1,3,m-1) + u(1,3,m-1) * 0.01;        
            u(1,3,m) =u(1,3,m-1) + (((-1*k(8)*(x(1,3,m-1)-x(1,4,m-1))^3)/(2*(l^2))-k(8)*((x(1,3,m-1)-x(1,2,m-1))^3)/(2*(l^2))-k(1)*((x(1,3,m-1)-x(2,3,m-1))^3)/(2*(l^2)))/m1)*0.01;
            
            x(1,4,m) =x(1,4,m-1) + u(1,4,m-1) * 0.01;        
            u(1,4,m) =u(1,4,m-1) + (((-1*k(8)*(x(1,4,m-1)-x(1,5,m-1))^3)/(2*(l^2))-k(8)*((x(1,4,m-1)-x(1,3,m-1))^3)/(2*(l^2))-k(1)*((x(1,4,m-1)-x(2,4,m-1))^3)/(2*(l^2)))/m1)*0.01;
            
            x(1,5,m) =x(1,5,m-1) + u(1,5,m-1) * 0.01;        
            u(1,5,m) =u(1,5,m-1) + (((-1*k(8)*(x(1,5,m-1)-x(2,6,m-1))^3)/(2*2*(l^2))-k(8)*((x(1,5,m-1)-x(1,4,m-1))^3)/(2*(l^2))-k(2)*((x(1,5,m-1)-x(2,5,m-1))^3)/(2*(l^2)))/m1)*0.01;
            
            x(2,1,m) =x(2,1,m-1) + u(2,1,m-1) * 0.01;        
            u(2,1,m) =u(2,1,m-1) + (((-1*k(7)*(x(2,1,m-1)-x(2,2,m-1))^3)/(2*(l^2))-k(8)*((x(2,1,m-1)-x(1,2,m-1))^3)/(2*2*(l^2))-k(8)*((x(2,1,m-1)-x(3,1,m-1))^3)/(2*(l^2)))/m1)*0.01;
            
            x(2,2,m) =x(2,2,m-1) + u(2,2,m-1) * 0.01;        
            u(2,2,m) =u(2,2,m-1) + ((((-1*k(7)*(x(2,2,m-1)-x(2,3,m-1))^3)/(2*(l^2))-k(7)*((x(2,2,m-1)-x(2,1,m-1))^3)/(2*(l^2))-k(2)*((x(2,2,m-1)-x(1,2,m-1))^3)/(2*(l^2)))-k(2)*((x(2,2,m-1)-x(3,2,m-1))^3)/(2*(l^2)))/m2) * 0.01;
            
            x(2,3,m) =x(2,3,m-1) + u(2,3,m-1) * 0.01;        
            u(2,3,m) =u(2,3,m-1) + ((((-1*k(7)*(x(2,3,m-1)-x(2,4,m-1))^3)/(2*(l^2))-k(7)*((x(2,3,m-1)-x(2,2,m-1))^3)/(2*(l^2))-k(1)*((x(2,3,m-1)-x(1,3,m-1))^3)/(2*(l^2)))-k(1)*((x(2,3,m-1)-x(3,3,m-1))^3)/(2*(l^2)))/m2)*0.01;
            
            x(2,4,m) =x(2,4,m-1) + u(2,4,m-1) * 0.01;        
            u(2,4,m) =u(2,4,m-1) + ((((-1*k(7)*(x(2,4,m-1)-x(2,5,m-1))^3)/(2*(l^2))-k(7)*((x(2,4,m-1)-x(2,3,m-1))^3)/(2*(l^2))-k(1)*((x(2,4,m-1)-x(1,4,m-1))^3)/(2*(l^2)))-k(1)*((x(2,4,m-1)-x(3,4,m-1))^3)/(2*(l^2)))/m2)*0.01;
            
            x(2,5,m) =x(2,5,m-1) + u(2,5,m-1) * 0.01;        
            u(2,5,m) =u(2,5,m-1) + ((((-1*k(7)*(x(2,5,m-1)-x(2,6,m-1))^3)/(2*(l^2))-k(7)*((x(2,5,m-1)-x(2,4,m-1))^3)/(2*(l^2))-k(2)*((x(2,5,m-1)-x(1,5,m-1))^3)/(2*(l^2)))-k(2)*((x(2,5,m-1)-x(3,5,m-1))^3)/(2*(l^2)))/m2)*0.01;
            
            x(2,6,m) =x(2,6,m-1) + u(2,6,m-1) * 0.01;        
            u(2,6,m) =u(2,6,m-1) + (-k(7)*((x(2,6,m-1)-x(2,5,m-1))^3)/(2*(l^2))-k(8)*((x(2,6,m-1)-x(1,5,m-1))^3)/(2*2*(l^2))-k(8)*((x(2,6,m-1)-x(3,6,m-1))^3)/(2*(l^2)))/m1*0.01;
            
            x(3,1,m) =x(3,1,m-1) + u(3,1,m-1) * 0.01;        
            u(3,1,m) =u(3,1,m-1) + (-k(6)*((x(3,1,m-1)-x(3,2,m-1))^3)/(2*(l^2))-k(8)*((x(3,1,m-1)-x(2,1,m-1))^3)/(2*(l^2))-k(8)*((x(3,1,m-1)-x(4,1,m-1))^3)/(2*(l^2)))/m1*0.01;

            x(3,2,m) =x(3,2,m-1) + u(3,2,m-1) * 0.01;        
            u(3,2,m) =u(3,2,m-1) + ((((-1*k(6)*(x(3,2,m-1)-x(3,3,m-1))^3)/(2*(l^2))-k(6)*((x(3,2,m-1)-x(3,1,m-1))^3)/(2*(l^2))-k(2)*((x(3,2,m-1)-x(2,2,m-1))^3)/(2*(l^2)))-k(2)*((x(3,2,m-1)-x(4,2,m-1))^3)/(2*(l^2)))/m2)*0.01;

            x(3,3,m) =x(3,3,m-1) + u(3,3,m-1) * 0.01;        
            u(3,3,m) =u(3,3,m-1) + ((((-1*k(6)*(x(3,3,m-1)-x(3,4,m-1))^3)/(2*(l^2))-k(6)*((x(3,3,m-1)-x(3,2,m-1))^3)/(2*(l^2))-k(1)*((x(3,3,m-1)-x(2,3,m-1))^3)/(2*(l^2)))-k(1)*((x(3,3,m-1)-x(4,3,m-1))^3)/(2*(l^2)))/m2)*0.01;
                
            x(3,4,m) =x(3,4,m-1) + u(3,4,m-1) * 0.01;        
            u(3,4,m) =u(3,4,m-1) + ((((-1*k(6)*(x(3,4,m-1)-x(3,5,m-1))^3)/(2*(l^2))-k(6)*((x(3,4,m-1)-x(3,3,m-1))^3)/(2*(l^2))-k(1)*((x(3,4,m-1)-x(2,4,m-1))^3)/(2*(l^2)))-k(1)*((x(3,4,m-1)-x(4,4,m-1))^3)/(2*(l^2)))/m2)*0.01;
    
            x(3,5,m) =x(3,5,m-1) + u(3,5,m-1) * 0.01;        
            u(3,5,m) =u(3,5,m-1) + ((((-1*k(6)*(x(3,5,m-1)-x(3,6,m-1))^3)/(2*(l^2))-k(6)*((x(3,5,m-1)-x(3,4,m-1))^3)/(2*(l^2))-k(2)*((x(3,5,m-1)-x(2,5,m-1))^3)/(2*(l^2)))-k(2)*((x(3,5,m-1)-x(4,5,m-1))^3)/(2*(l^2)))/m2)*0.01;
               
            x(3,6,m) =x(3,6,m-1) + u(3,6,m-1) * 0.01;        
            u(3,6,m) =u(3,6,m-1) + (-k(6)*((x(3,6,m-1)-x(3,5,m-1))^3)/(2*(l^2))-k(8)*((x(3,6,m-1)-x(2,6,m-1))^3)/(2*(l^2))-k(8)*((x(3,6,m-1)-x(4,6,m-1))^3)/(2*(l^2)))/m1*0.01;

            x(4,1,m) =x(4,1,m-1) + u(4,1,m-1) * 0.01;        
            u(4,1,m) =u(4,1,m-1) + (-k(5)*((x(4,1,m-1)-x(4,2,m-1))^3)/(2*(l^2))-k(8)*((x(4,1,m-1)-x(3,1,m-1))^3)/(2*(l^2))-k(8)*((x(4,1,m-1)-x(5,1,m-1))^3)/(2*(l^2)))/m1*0.01;
 
            x(4,2,m) =x(4,2,m-1) + u(4,2,m-1) * 0.01;        
            u(4,2,m) =u(4,2,m-1) + ((((-1*k(5)*(x(4,2,m-1)-x(4,3,m-1))^3)/(2*(l^2))-k(5)*((x(4,2,m-1)-x(4,1,m-1))^3)/(2*(l^2))-k(2)*((x(4,2,m-1)-x(3,2,m-1))^3)/(2*(l^2)))-k(2)*((x(4,2,m-1)-x(5,2,m-1))^3)/(2*(l^2)))/m2)*0.01;
 
            x(4,3,m) =x(4,3,m-1) + u(4,3,m-1) * 0.01;        
            u(4,3,m) =u(4,3,m-1) + ((((-1*k(5)*(x(4,3,m-1)-x(4,4,m-1))^3)/(2*(l^2))-k(5)*((x(4,3,m-1)-x(4,2,m-1))^3)/(2*(l^2))-k(1)*((x(4,3,m-1)-x(3,3,m-1))^3)/(2*(l^2)))-k(1)*((x(4,3,m-1)-x(5,3,m-1))^3)/(2*(l^2)))/m2)*0.01;
                
            x(4,4,m) =x(4,4,m-1) + u(4,4,m-1) * 0.01;        
            u(4,4,m) =u(4,4,m-1) + ((((-1*k(5)*(x(4,4,m-1)-x(4,5,m-1))^3)/(2*(l^2))-k(5)*((x(4,4,m-1)-x(4,3,m-1))^3)/(2*(l^2))-k(1)*((x(4,4,m-1)-x(3,4,m-1))^3)/(2*(l^2)))-k(1)*((x(4,4,m-1)-x(5,4,m-1))^3)/(2*(l^2)))/m2)*0.01;
    
            x(4,5,m) =x(4,5,m-1) + u(4,5,m-1) * 0.01;        
            u(4,5,m) =u(4,5,m-1) + ((((-1*k(5)*(x(4,5,m-1)-x(4,6,m-1))^3)/(2*(l^2))-k(5)*((x(4,5,m-1)-x(4,4,m-1))^3)/(2*(l^2))-k(2)*((x(4,5,m-1)-x(3,5,m-1))^3)/(2*(l^2)))-k(2)*((x(4,5,m-1)-x(5,5,m-1))^3)/(2*(l^2)))/m2)*0.01;
               
            x(4,6,m) =x(4,6,m-1) + u(4,6,m-1) * 0.01;        
            u(4,6,m) =u(4,6,m-1) + (-k(5)*((x(4,6,m-1)-x(4,5,m-1))^3)/(2*(l^2))-k(8)*((x(4,6,m-1)-x(3,6,m-1))^3)/(2*(l^2))-k(8)*((x(4,6,m-1)-x(5,6,m-1))^3)/(2*(l^2)))/m1*0.01;
            
            x(5,1,m) =x(5,1,m-1) + u(5,1,m-1) * 0.01;        
            u(5,1,m) =u(5,1,m-1) + (-k(4)*((x(5,1,m-1)-x(5,2,m-1))^3)/(2*(l^2))-k(8)*((x(5,1,m-1)-x(4,1,m-1))^3)/(2*(l^2))-k(8)*((x(5,1,m-1)-x(6,1,m-1))^3)/(2*(l^2)))/m1*0.01;
 
            x(5,2,m) =x(5,2,m-1) + u(5,2,m-1) * 0.01;        
            u(5,2,m) =u(5,2,m-1) + ((((-1*k(4)*(x(5,2,m-1)-x(5,3,m-1))^3)/(2*(l^2))-k(4)*((x(5,2,m-1)-x(5,1,m-1))^3)/(2*(l^2))-k(2)*((x(5,2,m-1)-x(4,2,m-1))^3)/(2*(l^2)))-k(2)*((x(5,2,m-1)-x(6,2,m-1))^3)/(2*(l^2)))/m2)*0.01;
 
            x(5,3,m) =x(5,3,m-1) + u(5,3,m-1) * 0.01;        
            u(5,3,m) =u(5,3,m-1) + ((((-1*k(4)*(x(5,3,m-1)-x(5,4,m-1))^3)/(2*(l^2))-k(4)*((x(5,3,m-1)-x(5,2,m-1))^3)/(2*(l^2))-k(1)*((x(5,3,m-1)-x(4,3,m-1))^3)/(2*(l^2)))-k(1)*((x(5,3,m-1)-x(6,3,m-1))^3)/(2*(l^2)))/m2)*0.01;
                
            x(5,4,m) =x(5,4,m-1) + u(5,4,m-1) * 0.01;        
            u(5,4,m) =u(5,4,m-1) + ((((-1*k(4)*(x(5,4,m-1)-x(5,5,m-1))^3)/(2*(l^2))-k(4)*((x(5,4,m-1)-x(5,3,m-1))^3)/(2*(l^2))-k(1)*((x(5,4,m-1)-x(4,4,m-1))^3)/(2*(l^2)))-k(1)*((x(5,4,m-1)-x(6,4,m-1))^3)/(2*(l^2)))/m2)*0.01;
    
            x(5,5,m) =x(5,5,m-1) + u(5,5,m-1) * 0.01;        
            u(5,5,m) =u(5,5,m-1) + ((((-1*k(4)*(x(5,5,m-1)-x(5,6,m-1))^3)/(2*(l^2))-k(4)*((x(5,5,m-1)-x(5,4,m-1))^3)/(2*(l^2))-k(2)*((x(5,5,m-1)-x(4,5,m-1))^3)/(2*(l^2)))-k(2)*((x(5,5,m-1)-x(6,5,m-1))^3)/(2*(l^2)))/m2)*0.01;
               
            x(5,6,m) =x(5,6,m-1) + u(5,6,m-1) * 0.01;        
            u(5,6,m) =u(5,6,m-1) + (-k(4)*((x(5,6,m-1)-x(5,5,m-1))^3)/(2*(l^2))-k(8)*((x(5,6,m-1)-x(4,6,m-1))^3)/(2*(l^2))-k(8)*((x(5,6,m-1)-x(6,6,m-1))^3)/(2*(l^2)))/m1*0.01;
 
            x(6,1,m) =x(6,1,m-1) + u(6,1,m-1) * 0.01;        
            u(6,1,m) =u(6,1,m-1) + ((((-1*k(3)*(x(6,1,m-1)-x(6,2,m-1))^3)/(2*(l^2))-k(8)*((x(6,1,m-1)-x(7,2,m-1))^3)/(2*2*(l^2))-k(8)*((x(6,1,m-1)-x(5,1,m-1))^3)/(2*(l^2)))/m1)*0.01);
            
            x(6,2,m) =x(6,2,m-1) + u(6,2,m-1) * 0.01;        
            u(6,2,m) =u(6,2,m-1) + ((((-1*k(3)*(x(6,2,m-1)-x(6,3,m-1))^3)/(2*(l^2))-k(3)*((x(6,2,m-1)-x(6,1,m-1))^3)/(2*(l^2))-k(2)*((x(6,2,m-1)-x(7,2,m-1))^3)/(2*(l^2)))-k(2)*((x(6,2,m-1)-x(5,2,m-1))^3)/(2*(l^2)))/m2)*0.01;
            
            x(6,3,m) =x(6,3,m-1) + u(6,3,m-1) * 0.01;        
            u(6,3,m) =u(6,3,m-1) + ((((-1*k(3)*(x(6,3,m-1)-x(6,4,m-1))^3)/(2*(l^2))-k(3)*((x(6,3,m-1)-x(6,2,m-1))^3)/(2*(l^2))-k(1)*((x(6,3,m-1)-x(7,3,m-1))^3)/(2*(l^2)))-k(1)*((x(6,3,m-1)-x(5,3,m-1))^3)/(2*(l^2)))/m2)*0.01;
            
            x(6,4,m) =x(6,4,m-1) + u(6,4,m-1) * 0.01;        
            u(6,4,m) =u(6,4,m-1) + ((((-1*k(3)*(x(6,4,m-1)-x(6,5,m-1))^3)/(2*(l^2))-k(3)*((x(6,4,m-1)-x(6,3,m-1))^3)/(2*(l^2))-k(1)*((x(6,4,m-1)-x(7,4,m-1))^3)/(2*(l^2)))-k(1)*((x(6,4,m-1)-x(5,4,m-1))^3)/(2*(l^2)))/m2)*0.01;
            
            x(6,5,m) =x(6,5,m-1) + u(6,5,m-1) * 0.01;        
            u(6,5,m) =u(6,5,m-1) + ((((-1*k(3)*(x(6,5,m-1)-x(6,6,m-1))^3)/(2*(l^2))-k(3)*((x(6,5,m-1)-x(6,4,m-1))^3)/(2*(l^2))-k(2)*((x(6,5,m-1)-x(7,5,m-1))^3)/(2*(l^2)))-k(2)*((x(6,5,m-1)-x(5,5,m-1))^3)/(2*(l^2)))/m2)*0.01;
            
            x(6,6,m) =x(6,6,m-1) + u(6,6,m-1) * 0.01;        
            u(6,6,m) =u(6,6,m-1) + (-k(3)*((x(6,6,m-1)-x(6,5,m-1))^3)/(2*(l^2))-k(8)*((x(6,6,m-1)-x(7,5,m-1))^3)/(2*2*(l^2))-k(8)*((x(6,6,m-1)-x(5,6,m-1))^3)/(2*(l^2)))/m1*0.01;
            
            x(7,2,m) =x(7,2,m-1) + u(7,2,m-1) * 0.01;        
            u(7,2,m) =u(7,2,m-1) + ((((-1*k(8)*(x(7,2,m-1)-x(7,3,m-1))^3)/(2*(l^2))-k(8)*((x(7,2,m-1)-x(6,1,m-1))^3)/(2*2*(l^2))-k(2)*((x(7,2,m-1)-x(6,2,m-1))^3)/(2*(l^2)))/m1)*0.01);
            
            x(7,3,m) =x(7,3,m-1) + u(7,3,m-1) * 0.01;        
            u(7,3,m) =u(7,3,m-1) + ((((-1*k(8)*(x(7,3,m-1)-x(7,4,m-1))^3)/(2*(l^2))-k(8)*((x(7,3,m-1)-x(7,2,m-1))^3)/(2*(l^2))-k(1)*((x(7,3,m-1)-x(6,3,m-1))^3)/(2*(l^2)))/m1)*0.01);
            
            x(7,4,m) =x(7,4,m-1) + u(7,4,m-1) * 0.01;        
            u(7,4,m) =u(7,4,m-1) + ((((-1*k(8)*(x(7,4,m-1)-x(7,5,m-1))^3)/(2*(l^2))-k(8)*((x(7,4,m-1)-x(7,3,m-1))^3)/(2*(l^2))-k(1)*((x(7,4,m-1)-x(6,4,m-1))^3)/(2*(l^2)))/m1)*0.01);
            
            x(7,5,m) =x(7,5,m-1) + u(7,5,m-1) * 0.01;        
            u(7,5,m) =u(7,5,m-1) + ((((-1*k(8)*(x(7,5,m-1)-x(6,6,m-1))^3)/(2*2*(l^2))-k(8)*((x(7,5,m-1)-x(7,4,m-1))^3)/(2*(l^2))-k(2)*((x(7,5,m-1)-x(6,5,m-1))^3)/(2*(l^2)))/m1)*0.01);
               
end
figure(2);
for m = 1:1:5000 
    plotx(m,1) = x(1,2,m);
end
tspan = [1:1:5000];
plot(tspan,plotx);

figure(1); clf;
mh = mesh(x(:,:,1));

for n = 1:1:5000
    set(gca, 'zlim', [-1,1]);
    set(mh,'zdata',x(:,:,n));
    drawnow;
end